const fetch = require("node-fetch");
const aut = require("./fn_oms_authentication");
module.exports  = async function Fn() {
    //console.log('Expire events');
    let url = process.env.OMS_SERVER+':'+process.env.PORT+'/pgapi/v2/fn_set_expired_lifetime'
    if(!process.env.LOCAL_SERVER){
    url = process.env.OMS_SERVER + '/pgapi/v2/fn_set_expired_lifetime'
    }
    

    try {
      let result = await fetch(url, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": aut()
        },
      });
      if (result.status == "200") {
        return await result.json();
      } else {
        console.error(result);
        return await result.json();
      }
    } catch (err) {
      console.error(err);
      return [];
    }
  }